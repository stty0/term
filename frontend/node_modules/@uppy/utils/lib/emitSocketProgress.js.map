{"version":3,"names":["throttle","emitSocketProgress","uploader","progressData","file","progress","bytesUploaded","bytesTotal","uppy","log","emit","leading","trailing"],"sources":["emitSocketProgress.ts"],"sourcesContent":["import throttle from 'lodash/throttle.js'\nimport type { UppyFile } from './UppyFile.js'\nimport type { FileProgress } from './FileProgress.js'\n\nfunction emitSocketProgress(\n  uploader: any,\n  progressData: {\n    progress: string // pre-formatted percentage\n    bytesTotal: number\n    bytesUploaded: number\n  },\n  file: UppyFile<any, any>,\n): void {\n  const { progress, bytesUploaded, bytesTotal } = progressData\n  if (progress) {\n    uploader.uppy.log(`Upload progress: ${progress}`)\n    uploader.uppy.emit('upload-progress', file, {\n      // @ts-expect-error todo remove in next major\n      uploader,\n      bytesUploaded,\n      bytesTotal,\n    } satisfies FileProgress)\n  }\n}\n\nexport default throttle(emitSocketProgress, 300, {\n  leading: true,\n  trailing: true,\n})\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,oBAAoB;AAIzC,SAASC,kBAAkBA,CACzBC,QAAa,EACbC,YAIC,EACDC,IAAwB,EAClB;EACN,MAAM;IAAEC,QAAQ;IAAEC,aAAa;IAAEC;EAAW,CAAC,GAAGJ,YAAY;EAC5D,IAAIE,QAAQ,EAAE;IACZH,QAAQ,CAACM,IAAI,CAACC,GAAG,CAAE,oBAAmBJ,QAAS,EAAC,CAAC;IACjDH,QAAQ,CAACM,IAAI,CAACE,IAAI,CAAC,iBAAiB,EAAEN,IAAI,EAAE;MAC1C;MACAF,QAAQ;MACRI,aAAa;MACbC;IACF,CAAwB,CAAC;EAC3B;AACF;AAEA,eAAeP,QAAQ,CAACC,kBAAkB,EAAE,GAAG,EAAE;EAC/CU,OAAO,EAAE,IAAI;EACbC,QAAQ,EAAE;AACZ,CAAC,CAAC"}